import{ds as c,dt as l,a as p}from"./index-vzMrgKlp.js";var f=Object.defineProperty,h=(n,e,t,o)=>{for(var r=void 0,a=n.length-1,d;a>=0;a--)(d=n[a])&&(r=d(e,t,r)||r);return r&&f(e,t,r),r};let s={},i={};function m(n,e,t,o){if(s[n])return t();if(e.id&&i[e.id])return o(new Error('There is already a script with ID "'+e.id+'"'));l.start("load_"+e.id.replace(/-/g,"_"));const r=document.createElement("script");r.async=!1,r.src=n,r.id=e.id,r.onload=()=>{s[n]=!0,i[e.id]=!0,Object.defineProperty(t,"name",{value:"resolve-"+e.id}),t()},r.onerror=a=>{o(a)},document.body.appendChild(r)}class u{constructor(e){this._creator_=e}fetch(e,t){return this._singlePromiseFactory.create(c.FETCH_SCRIPT,e,(o,r)=>{m(e,t,o,r)})}loadScripts(e){const t=[];return e.forEach(o=>{let r=this.fetch(o.name,{id:o.id});t.push(r)}),Promise.all(t)}cleanUp(){for(let e in i)if(i.hasOwnProperty(e)){const t=document.getElementById(e);t&&t.parentElement.removeChild(t)}s={},i={}}}h([p],u.prototype,"_singlePromiseFactory");export{u as _};
