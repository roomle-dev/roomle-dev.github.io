var e=class{_computedStyleCache=new Map;_maxLifetime=16;_cacheCleanInterval=null;constructor(e=16){this._maxLifetime=e}get(e){let t=this._computedStyleCache.get(e),n=Date.now();if(t&&n-t.updated<this._maxLifetime)return t.style;let r=getComputedStyle(e);return this._computedStyleCache.set(e,{style:r,updated:n}),this._cacheCleanInterval||=setInterval(()=>this._cleanUpCache,Math.max(this._maxLifetime*1e3,5e3)),r}_cleanUpCache(){let e=Date.now();for(let[t,{updated:n}]of this._computedStyleCache.entries())e-n>=this._maxLifetime&&this._computedStyleCache.delete(t);this._computedStyleCache.size===0&&this._cacheCleanInterval&&(clearInterval(this._cacheCleanInterval),this._cacheCleanInterval=null)}},t=e=>window.TouchEvent&&e instanceof window.TouchEvent,n,r=t=>(n||=new e,n.get(t)),i=(e,t,n)=>{let i=parseFloat(e),a=window.devicePixelRatio||1;if(t===`px`)return i;if(t===`%`){let e=n===document.documentElement?window.innerWidth:n.offsetWidth;return i/100*e}if(t===`rem`)return i*parseFloat(r(document.documentElement).fontSize);if(t===`em`)return i*parseFloat(r(n).fontSize);if(t===`vh`||t===`vw`||t===`vmin`||t===`vmax`){let e={vh:window.innerHeight,vw:window.innerWidth,vmin:Math.min(window.innerWidth,window.innerHeight),vmax:Math.max(window.innerWidth,window.innerHeight)};return i/100*e[t]}let o={cm:37.7952755906,mm:3.77952755906,in:96};return t in o?i*o[t]*a:(console.warn(`Unable to determine coordinates for drag-in. Therefore drag-in is not possible. Check the CSS that positions the iframe of Roomle`),0)},a=(e,t,n={x:0,y:0})=>{let a=e.getBoundingClientRect(),s=r(e).transform,c=0,l=0;if(s!==`none`){let t=s.match(/translate\(\s*([-+]?\d*\.?\d+|\d+)(px|%)?,?\s*([-+]?\d*\.?\d+|\d+)?(px|%)?\s*\)/);t&&(c=i(t[1],t[2],e),l=i(t[3],t[4],e))}let{clientX:u,clientY:d}=o(t,n);return{x:u-a.left-c+e.scrollLeft,y:d-a.top-l+e.scrollTop}},o=(e,n=null)=>{let{clientX:r,clientY:i}=t(e)?s(e):e;return{clientX:r>0?r:n?n.x:r,clientY:i>0?i:n?n.y:i}},s=e=>{if(e.touches.length){let{clientX:t,clientY:n}=e.touches[0];if(e.touches.length>1){let r=e.touches[1],i=r.clientX,a=r.clientY;t=(t+i)/2,n=(n+a)/2}return{clientX:t,clientY:n}}let t=e.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}},c=500,l=10,u=100,d=15,f=(e,n=0)=>t(e)?{clientX:e.touches[n].clientX,clientY:e.touches[n].clientY}:{clientX:e.clientX,clientY:e.clientY},p=e=>e&&t(e)?e.touches.length>0:!0,m=class{_touchDragTimeOut;_onTouchDragStart;_payload=null;_delay=500;_firstTouch=null;_lastTouch=null;_epsilon=10;constructor(e,{onTouchDragStart:t},n={}){this._payload=e,this._onTouchDragStart=t,this._delay=typeof n.delay==`number`?n.delay:500,this._epsilon=typeof n.epsilon==`number`?n.epsilon:10}onStart(e){p(e)&&(this._touchDragTimeOut||=(this._firstTouch=f(e,t(e)?e.touches.length-1:0),setTimeout(()=>{this._clearTimeout(),this._lastTouch||=f(e),this._checkXDistance(e)()},this._delay)))}onEnd(){this._resetTouches()}onMove(e){p(e)&&(this._lastTouch=f(e))}_clearTimeout(){this._touchDragTimeOut&&=(clearTimeout(this._touchDragTimeOut),null)}_resetTouches(){this._clearTimeout(),this._lastTouch=null,this._firstTouch=null,this._payload=null}_checkXDistance(e){return()=>{if(!this._firstTouch||!this._lastTouch)return;let t=!1;t=Math.abs(this._firstTouch.clientX-this._lastTouch.clientX)<this._epsilon,t&&(this._onTouchDragStart(this._payload,e),this._resetTouches())}}};export{u as a,t as c,o as i,r as l,d as n,l as o,m as r,c as s,a as t};