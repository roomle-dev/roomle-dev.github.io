import{an as Bt,ao as kt,ap as ot,ag as zt,ad as Nt,ae as p,aq as ht,af as Ot,ar as pt,al as dt,as as gt,at as mt,au as ft,av as yt,aw as bt,ax as H,ay as C,az as J,aA as tt,aj as j,aB as St,aC as Ft,aD as W,aE as M,aF as xt,aG as et,aH as Mt,aI as Et,aJ as Ht}from"./index-B6gMdnHJ.js";const N=new p,it=new p,Y=new p,O=new p,st=new p,V=new p,rt=new p;class Lt{constructor(t=new p,i=new p(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,N)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const e=i.dot(this.direction);return e<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,e)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=N.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(N.copy(this.origin).addScaledVector(this.direction,i),N.distanceToSquared(t))}distanceSqToSegment(t,i,e,s){it.copy(t).add(i).multiplyScalar(.5),Y.copy(i).sub(t).normalize(),O.copy(this.origin).sub(it);const r=t.distanceTo(i)*.5,n=-this.direction.dot(Y),o=O.dot(this.direction),h=-O.dot(Y),l=O.lengthSq(),c=Math.abs(1-n*n);let u,a,g,y;if(c>0)if(u=n*h-o,a=n*o-h,y=r*c,u>=0)if(a>=-y)if(a<=y){const S=1/c;u*=S,a*=S,g=u*(u+n*a+2*o)+a*(n*u+a+2*h)+l}else a=r,u=Math.max(0,-(n*a+o)),g=-u*u+a*(a+2*h)+l;else a=-r,u=Math.max(0,-(n*a+o)),g=-u*u+a*(a+2*h)+l;else a<=-y?(u=Math.max(0,-(-n*r+o)),a=u>0?-r:Math.min(Math.max(-r,-h),r),g=-u*u+a*(a+2*h)+l):a<=y?(u=0,a=Math.min(Math.max(-r,-h),r),g=a*(a+2*h)+l):(u=Math.max(0,-(n*r+o)),a=u>0?r:Math.min(Math.max(-r,-h),r),g=-u*u+a*(a+2*h)+l);else a=n>0?-r:r,u=Math.max(0,-(n*a+o)),g=-u*u+a*(a+2*h)+l;return e&&e.copy(this.origin).addScaledVector(this.direction,u),s&&s.copy(it).addScaledVector(Y,a),g}intersectSphere(t,i){N.subVectors(t.center,this.origin);const e=N.dot(this.direction),s=N.dot(N)-e*e,r=t.radius*t.radius;if(s>r)return null;const n=Math.sqrt(r-s),o=e-n,h=e+n;return h<0?null:o<0?this.at(h,i):this.at(o,i)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const e=-(this.origin.dot(t.normal)+t.constant)/i;return e>=0?e:null}intersectPlane(t,i){const e=this.distanceToPlane(t);return e===null?null:this.at(e,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let e,s,r,n,o,h;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,a=this.origin;return l>=0?(e=(t.min.x-a.x)*l,s=(t.max.x-a.x)*l):(e=(t.max.x-a.x)*l,s=(t.min.x-a.x)*l),c>=0?(r=(t.min.y-a.y)*c,n=(t.max.y-a.y)*c):(r=(t.max.y-a.y)*c,n=(t.min.y-a.y)*c),e>n||r>s||((r>e||isNaN(e))&&(e=r),(n<s||isNaN(s))&&(s=n),u>=0?(o=(t.min.z-a.z)*u,h=(t.max.z-a.z)*u):(o=(t.max.z-a.z)*u,h=(t.min.z-a.z)*u),e>h||o>s)||((o>e||e!==e)&&(e=o),(h<s||s!==s)&&(s=h),s<0)?null:this.at(e>=0?e:s,i)}intersectsBox(t){return this.intersectBox(t,N)!==null}intersectTriangle(t,i,e,s,r){st.subVectors(i,t),V.subVectors(e,t),rt.crossVectors(st,V);let n=this.direction.dot(rt),o;if(n>0){if(s)return null;o=1}else if(n<0)o=-1,n=-n;else return null;O.subVectors(this.origin,t);const h=o*this.direction.dot(V.crossVectors(O,V));if(h<0)return null;const l=o*this.direction.dot(st.cross(O));if(l<0||h+l>n)return null;const c=-o*O.dot(rt);return c<0?null:this.at(c/n,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}function It(d){for(let t=d.length-1;t>=0;--t)if(d[t]>=65535)return!0;return!1}const wt={};function vt(d){d in wt||(wt[d]=!0,console.warn(d))}const Tt=new ot().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),At=new ot().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Pt(){const d={enabled:!0,workingColorSpace:xt,spaces:{},convert:function(s,r,n){return this.enabled===!1||r===n||!r||!n||(this.spaces[r].transfer===et&&(s.r=P(s.r),s.g=P(s.g),s.b=P(s.b)),this.spaces[r].primaries!==this.spaces[n].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===et&&(s.r=q(s.r),s.g=q(s.g),s.b=q(s.b))),s},workingToColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},colorSpaceToWorking:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Et?Mt:this.spaces[s].transfer},getToneMappingMode:function(s){return this.spaces[s].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,n){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,r){return vt("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),d.workingToColorSpace(s,r)},toWorkingColorSpace:function(s,r){return vt("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),d.colorSpaceToWorking(s,r)}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],e=[.3127,.329];return d.define({[xt]:{primaries:t,whitePoint:e,transfer:Mt,toXYZ:Tt,fromXYZ:At,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:C},outputColorSpaceConfig:{drawingBufferColorSpace:C}},[C]:{primaries:t,whitePoint:e,transfer:et,toXYZ:Tt,fromXYZ:At,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:C}}}),d}const k=Pt();function P(d){return d<.04045?d*.0773993808:Math.pow(d*.9478672986+.0521327014,2.4)}function q(d){return d<.0031308?d*12.92:1.055*Math.pow(d,.41666)-.055}const Ct={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},F={h:0,s:0,l:0},U={h:0,s:0,l:0};function nt(d,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?d+(t-d)*6*i:i<1/2?t:i<2/3?d+(t-d)*6*(2/3-i):d}class lt{constructor(t,i,e){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,e)}set(t,i,e){if(i===void 0&&e===void 0){const s=t;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(t,i,e);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=C){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,k.colorSpaceToWorking(this,i),this}setRGB(t,i,e,s=k.workingColorSpace){return this.r=t,this.g=i,this.b=e,k.colorSpaceToWorking(this,s),this}setHSL(t,i,e,s=k.workingColorSpace){if(t=Ht(t,1),i=J(i,0,1),e=J(e,0,1),i===0)this.r=this.g=this.b=e;else{const r=e<=.5?e*(1+i):e+i-e*i,n=2*e-r;this.r=nt(n,r,t+1/3),this.g=nt(n,r,t),this.b=nt(n,r,t-1/3)}return k.colorSpaceToWorking(this,s),this}setStyle(t,i=C){function e(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const n=s[1],o=s[2];switch(n){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return e(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,i);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return e(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,i);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return e(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,i);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=s[1],n=r.length;if(n===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,i);if(n===6)return this.setHex(parseInt(r,16),i);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=C){const e=Ct[t.toLowerCase()];return e!==void 0?this.setHex(e,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=P(t.r),this.g=P(t.g),this.b=P(t.b),this}copyLinearToSRGB(t){return this.r=q(t.r),this.g=q(t.g),this.b=q(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=C){return k.workingToColorSpace(x.copy(this),t),Math.round(J(x.r*255,0,255))*65536+Math.round(J(x.g*255,0,255))*256+Math.round(J(x.b*255,0,255))}getHexString(t=C){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=k.workingColorSpace){k.workingToColorSpace(x.copy(this),i);const e=x.r,s=x.g,r=x.b,n=Math.max(e,s,r),o=Math.min(e,s,r);let h,l;const c=(o+n)/2;if(o===n)h=0,l=0;else{const u=n-o;switch(l=c<=.5?u/(n+o):u/(2-n-o),n){case e:h=(s-r)/u+(s<r?6:0);break;case s:h=(r-e)/u+2;break;case r:h=(e-s)/u+4;break}h/=6}return t.h=h,t.s=l,t.l=c,t}getRGB(t,i=k.workingColorSpace){return k.workingToColorSpace(x.copy(this),i),t.r=x.r,t.g=x.g,t.b=x.b,t}getStyle(t=C){k.workingToColorSpace(x.copy(this),t);const i=x.r,e=x.g,s=x.b;return t!==C?`color(${t} ${i.toFixed(3)} ${e.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(e*255)},${Math.round(s*255)})`}offsetHSL(t,i,e){return this.getHSL(F),this.setHSL(F.h+t,F.s+i,F.l+e)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,e){return this.r=t.r+(i.r-t.r)*e,this.g=t.g+(i.g-t.g)*e,this.b=t.b+(i.b-t.b)*e,this}lerpHSL(t,i){this.getHSL(F),t.getHSL(U);const e=tt(F.h,U.h,i),s=tt(F.s,U.s,i),r=tt(F.l,U.l,i);return this.setHSL(e,s,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,e=this.g,s=this.b,r=t.elements;return this.r=r[0]*i+r[3]*e+r[6]*s,this.g=r[1]*i+r[4]*e+r[7]*s,this.b=r[2]*i+r[5]*e+r[8]*s,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const x=new lt;lt.NAMES=Ct;let qt=0;class Yt extends Bt{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qt++}),this.uuid=kt(),this.name="",this.type="Material",this.blending=pt,this.side=dt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gt,this.blendDst=mt,this.blendEquation=ft,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new lt(0,0,0),this.blendAlpha=0,this.depthFunc=yt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=H,this.stencilZFail=H,this.stencilZPass=H,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const e=t[i];if(e===void 0){console.warn(`THREE.Material: parameter '${i}' has value of undefined.`);continue}const s=this[i];if(s===void 0){console.warn(`THREE.Material: '${i}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(e):s&&s.isVector3&&e&&e.isVector3?s.copy(e):this[i]=e}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const e={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.color&&this.color.isColor&&(e.color=this.color.getHex()),this.roughness!==void 0&&(e.roughness=this.roughness),this.metalness!==void 0&&(e.metalness=this.metalness),this.sheen!==void 0&&(e.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(e.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(e.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(e.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(e.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(e.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(e.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(e.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(e.shininess=this.shininess),this.clearcoat!==void 0&&(e.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(e.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(e.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(e.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(e.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,e.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(e.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(e.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(e.dispersion=this.dispersion),this.iridescence!==void 0&&(e.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(e.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(e.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(e.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(e.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(e.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(e.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(e.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(e.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(e.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(e.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(e.lightMap=this.lightMap.toJSON(t).uuid,e.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(e.aoMap=this.aoMap.toJSON(t).uuid,e.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(e.bumpMap=this.bumpMap.toJSON(t).uuid,e.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(e.normalMap=this.normalMap.toJSON(t).uuid,e.normalMapType=this.normalMapType,e.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(e.displacementMap=this.displacementMap.toJSON(t).uuid,e.displacementScale=this.displacementScale,e.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(e.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(e.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(e.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(e.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(e.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(e.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(e.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(e.combine=this.combine)),this.envMapRotation!==void 0&&(e.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(e.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(e.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(e.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(e.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(e.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(e.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(e.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(e.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(e.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(e.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(e.size=this.size),this.shadowSide!==null&&(e.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(e.sizeAttenuation=this.sizeAttenuation),this.blending!==pt&&(e.blending=this.blending),this.side!==dt&&(e.side=this.side),this.vertexColors===!0&&(e.vertexColors=!0),this.opacity<1&&(e.opacity=this.opacity),this.transparent===!0&&(e.transparent=!0),this.blendSrc!==gt&&(e.blendSrc=this.blendSrc),this.blendDst!==mt&&(e.blendDst=this.blendDst),this.blendEquation!==ft&&(e.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(e.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(e.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(e.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(e.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(e.blendAlpha=this.blendAlpha),this.depthFunc!==yt&&(e.depthFunc=this.depthFunc),this.depthTest===!1&&(e.depthTest=this.depthTest),this.depthWrite===!1&&(e.depthWrite=this.depthWrite),this.colorWrite===!1&&(e.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(e.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bt&&(e.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(e.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(e.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==H&&(e.stencilFail=this.stencilFail),this.stencilZFail!==H&&(e.stencilZFail=this.stencilZFail),this.stencilZPass!==H&&(e.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(e.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(e.rotation=this.rotation),this.polygonOffset===!0&&(e.polygonOffset=!0),this.polygonOffsetFactor!==0&&(e.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(e.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(e.linewidth=this.linewidth),this.dashSize!==void 0&&(e.dashSize=this.dashSize),this.gapSize!==void 0&&(e.gapSize=this.gapSize),this.scale!==void 0&&(e.scale=this.scale),this.dithering===!0&&(e.dithering=!0),this.alphaTest>0&&(e.alphaTest=this.alphaTest),this.alphaHash===!0&&(e.alphaHash=!0),this.alphaToCoverage===!0&&(e.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(e.premultipliedAlpha=!0),this.forceSinglePass===!0&&(e.forceSinglePass=!0),this.wireframe===!0&&(e.wireframe=!0),this.wireframeLinewidth>1&&(e.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(e.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(e.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(e.flatShading=!0),this.visible===!1&&(e.visible=!1),this.toneMapped===!1&&(e.toneMapped=!1),this.fog===!1&&(e.fog=!1),Object.keys(this.userData).length>0&&(e.userData=this.userData);function s(r){const n=[];for(const o in r){const h=r[o];delete h.metadata,n.push(h)}return n}if(i){const r=s(t.textures),n=s(t.images);r.length>0&&(e.textures=r),n.length>0&&(e.images=n)}return e}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let e=null;if(i!==null){const s=i.length;e=new Array(s);for(let r=0;r!==s;++r)e[r]=i[r].clone()}return this.clippingPlanes=e,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}const f=new p,$=new j;let Xt=0;class X{constructor(t,i,e=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Xt++}),this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=e,this.usage=St,this.updateRanges=[],this.gpuType=Ft,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,e){t*=this.itemSize,e*=i.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[t+s]=i.array[e+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,e=this.count;i<e;i++)$.fromBufferAttribute(this,i),$.applyMatrix3(t),this.setXY(i,$.x,$.y);else if(this.itemSize===3)for(let i=0,e=this.count;i<e;i++)f.fromBufferAttribute(this,i),f.applyMatrix3(t),this.setXYZ(i,f.x,f.y,f.z);return this}applyMatrix4(t){for(let i=0,e=this.count;i<e;i++)f.fromBufferAttribute(this,i),f.applyMatrix4(t),this.setXYZ(i,f.x,f.y,f.z);return this}applyNormalMatrix(t){for(let i=0,e=this.count;i<e;i++)f.fromBufferAttribute(this,i),f.applyNormalMatrix(t),this.setXYZ(i,f.x,f.y,f.z);return this}transformDirection(t){for(let i=0,e=this.count;i<e;i++)f.fromBufferAttribute(this,i),f.transformDirection(t),this.setXYZ(i,f.x,f.y,f.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let e=this.array[t*this.itemSize+i];return this.normalized&&(e=W(e,this.array)),e}setComponent(t,i,e){return this.normalized&&(e=M(e,this.array)),this.array[t*this.itemSize+i]=e,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=W(i,this.array)),i}setX(t,i){return this.normalized&&(i=M(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=W(i,this.array)),i}setY(t,i){return this.normalized&&(i=M(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=W(i,this.array)),i}setZ(t,i){return this.normalized&&(i=M(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=W(i,this.array)),i}setW(t,i){return this.normalized&&(i=M(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,e){return t*=this.itemSize,this.normalized&&(i=M(i,this.array),e=M(e,this.array)),this.array[t+0]=i,this.array[t+1]=e,this}setXYZ(t,i,e,s){return t*=this.itemSize,this.normalized&&(i=M(i,this.array),e=M(e,this.array),s=M(s,this.array)),this.array[t+0]=i,this.array[t+1]=e,this.array[t+2]=s,this}setXYZW(t,i,e,s,r){return t*=this.itemSize,this.normalized&&(i=M(i,this.array),e=M(e,this.array),s=M(s,this.array),r=M(r,this.array)),this.array[t+0]=i,this.array[t+1]=e,this.array[t+2]=s,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==St&&(t.usage=this.usage),t}}class Zt extends X{constructor(t,i,e){super(new Uint16Array(t),i,e)}}class Jt extends X{constructor(t,i,e){super(new Uint32Array(t),i,e)}}class Wt extends X{constructor(t,i,e){super(new Float32Array(t),i,e)}}let Dt=0;const A=new zt,at=new Nt,I=new p,w=new ht,D=new ht,b=new p;class Rt extends Bt{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dt++}),this.uuid=kt(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(It(t)?Jt:Zt)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,e=0){this.groups.push({start:t,count:i,materialIndex:e})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const e=this.attributes.normal;if(e!==void 0){const r=new ot().getNormalMatrix(t);e.applyNormalMatrix(r),e.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return A.makeRotationFromQuaternion(t),this.applyMatrix4(A),this}rotateX(t){return A.makeRotationX(t),this.applyMatrix4(A),this}rotateY(t){return A.makeRotationY(t),this.applyMatrix4(A),this}rotateZ(t){return A.makeRotationZ(t),this.applyMatrix4(A),this}translate(t,i,e){return A.makeTranslation(t,i,e),this.applyMatrix4(A),this}scale(t,i,e){return A.makeScale(t,i,e),this.applyMatrix4(A),this}lookAt(t){return at.lookAt(t),at.updateMatrix(),this.applyMatrix4(at.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(I).negate(),this.translate(I.x,I.y,I.z),this}setFromPoints(t){const i=this.getAttribute("position");if(i===void 0){const e=[];for(let s=0,r=t.length;s<r;s++){const n=t[s];e.push(n.x,n.y,n.z||0)}this.setAttribute("position",new Wt(e,3))}else{const e=Math.min(t.length,i.count);for(let s=0;s<e;s++){const r=t[s];i.setXYZ(s,r.x,r.y,r.z||0)}t.length>i.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ht);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new p(-1/0,-1/0,-1/0),new p(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let e=0,s=i.length;e<s;e++){const r=i[e];w.setFromBufferAttribute(r),this.morphTargetsRelative?(b.addVectors(this.boundingBox.min,w.min),this.boundingBox.expandByPoint(b),b.addVectors(this.boundingBox.max,w.max),this.boundingBox.expandByPoint(b)):(this.boundingBox.expandByPoint(w.min),this.boundingBox.expandByPoint(w.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ot);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new p,1/0);return}if(t){const e=this.boundingSphere.center;if(w.setFromBufferAttribute(t),i)for(let r=0,n=i.length;r<n;r++){const o=i[r];D.setFromBufferAttribute(o),this.morphTargetsRelative?(b.addVectors(w.min,D.min),w.expandByPoint(b),b.addVectors(w.max,D.max),w.expandByPoint(b)):(w.expandByPoint(D.min),w.expandByPoint(D.max))}w.getCenter(e);let s=0;for(let r=0,n=t.count;r<n;r++)b.fromBufferAttribute(t,r),s=Math.max(s,e.distanceToSquared(b));if(i)for(let r=0,n=i.length;r<n;r++){const o=i[r],h=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)b.fromBufferAttribute(o,l),h&&(I.fromBufferAttribute(t,l),b.add(I)),s=Math.max(s,e.distanceToSquared(b))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const e=i.position,s=i.normal,r=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new X(new Float32Array(4*e.count),4));const n=this.getAttribute("tangent"),o=[],h=[];for(let m=0;m<e.count;m++)o[m]=new p,h[m]=new p;const l=new p,c=new p,u=new p,a=new j,g=new j,y=new j,S=new p,R=new p;function G(m,v,T){l.fromBufferAttribute(e,m),c.fromBufferAttribute(e,v),u.fromBufferAttribute(e,T),a.fromBufferAttribute(r,m),g.fromBufferAttribute(r,v),y.fromBufferAttribute(r,T),c.sub(l),u.sub(l),g.sub(a),y.sub(a);const z=1/(g.x*y.y-y.x*g.y);isFinite(z)&&(S.copy(c).multiplyScalar(y.y).addScaledVector(u,-g.y).multiplyScalar(z),R.copy(u).multiplyScalar(g.x).addScaledVector(c,-y.x).multiplyScalar(z),o[m].add(S),o[v].add(S),o[T].add(S),h[m].add(R),h[v].add(R),h[T].add(R))}let E=this.groups;E.length===0&&(E=[{start:0,count:t.count}]);for(let m=0,v=E.length;m<v;++m){const T=E[m],z=T.start,Q=T.count;for(let B=z,K=z+Q;B<K;B+=3)G(t.getX(B+0),t.getX(B+1),t.getX(B+2))}const Z=new p,ut=new p,L=new p,ct=new p;function _(m){L.fromBufferAttribute(s,m),ct.copy(L);const v=o[m];Z.copy(v),Z.sub(L.multiplyScalar(L.dot(v))).normalize(),ut.crossVectors(ct,v);const T=ut.dot(h[m])<0?-1:1;n.setXYZW(m,Z.x,Z.y,Z.z,T)}for(let m=0,v=E.length;m<v;++m){const T=E[m],z=T.start,Q=T.count;for(let B=z,K=z+Q;B<K;B+=3)_(t.getX(B+0)),_(t.getX(B+1)),_(t.getX(B+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let e=this.getAttribute("normal");if(e===void 0)e=new X(new Float32Array(i.count*3),3),this.setAttribute("normal",e);else for(let a=0,g=e.count;a<g;a++)e.setXYZ(a,0,0,0);const s=new p,r=new p,n=new p,o=new p,h=new p,l=new p,c=new p,u=new p;if(t)for(let a=0,g=t.count;a<g;a+=3){const y=t.getX(a+0),S=t.getX(a+1),R=t.getX(a+2);s.fromBufferAttribute(i,y),r.fromBufferAttribute(i,S),n.fromBufferAttribute(i,R),c.subVectors(n,r),u.subVectors(s,r),c.cross(u),o.fromBufferAttribute(e,y),h.fromBufferAttribute(e,S),l.fromBufferAttribute(e,R),o.add(c),h.add(c),l.add(c),e.setXYZ(y,o.x,o.y,o.z),e.setXYZ(S,h.x,h.y,h.z),e.setXYZ(R,l.x,l.y,l.z)}else for(let a=0,g=i.count;a<g;a+=3)s.fromBufferAttribute(i,a+0),r.fromBufferAttribute(i,a+1),n.fromBufferAttribute(i,a+2),c.subVectors(n,r),u.subVectors(s,r),c.cross(u),e.setXYZ(a+0,c.x,c.y,c.z),e.setXYZ(a+1,c.x,c.y,c.z),e.setXYZ(a+2,c.x,c.y,c.z);this.normalizeNormals(),e.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,e=t.count;i<e;i++)b.fromBufferAttribute(t,i),b.normalize(),t.setXYZ(i,b.x,b.y,b.z)}toNonIndexed(){function t(o,h){const l=o.array,c=o.itemSize,u=o.normalized,a=new l.constructor(h.length*c);let g=0,y=0;for(let S=0,R=h.length;S<R;S++){o.isInterleavedBufferAttribute?g=h[S]*o.data.stride+o.offset:g=h[S]*c;for(let G=0;G<c;G++)a[y++]=l[g++]}return new X(a,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Rt,e=this.index.array,s=this.attributes;for(const o in s){const h=s[o],l=t(h,e);i.setAttribute(o,l)}const r=this.morphAttributes;for(const o in r){const h=[],l=r[o];for(let c=0,u=l.length;c<u;c++){const a=l[c],g=t(a,e);h.push(g)}i.morphAttributes[o]=h}i.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let o=0,h=n.length;o<h;o++){const l=n[o];i.addGroup(l.start,l.count,l.materialIndex)}return i}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const h=this.parameters;for(const l in h)h[l]!==void 0&&(t[l]=h[l]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const e=this.attributes;for(const h in e){const l=e[h];t.data.attributes[h]=l.toJSON(t.data)}const s={};let r=!1;for(const h in this.morphAttributes){const l=this.morphAttributes[h],c=[];for(let u=0,a=l.length;u<a;u++){const g=l[u];c.push(g.toJSON(t.data))}c.length>0&&(s[h]=c,r=!0)}r&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(t.data.groups=JSON.parse(JSON.stringify(n)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere=o.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const e=t.index;e!==null&&this.setIndex(e.clone());const s=t.attributes;for(const l in s){const c=s[l];this.setAttribute(l,c.clone(i))}const r=t.morphAttributes;for(const l in r){const c=[],u=r[l];for(let a=0,g=u.length;a<g;a++)c.push(u[a].clone(i));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const n=t.groups;for(let l=0,c=n.length;l<c;l++){const u=n[l];this.addGroup(u.start,u.count,u.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const h=t.boundingSphere;return h!==null&&(this.boundingSphere=h.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}export{Rt as E,Yt as G,Wt as J,Lt as _,lt as l};
