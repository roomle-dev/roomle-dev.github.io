var C=Object.defineProperty,x=(e,t,i)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,o=(e,t,i)=>x(e,typeof t!="symbol"?t+"":t,i);class S{constructor(t=16){o(this,"_computedStyleCache",new Map),o(this,"_maxLifetime",16),o(this,"_cacheCleanInterval",null),this._maxLifetime=t}get(t){const i=this._computedStyleCache.get(t),n=Date.now();if(i&&n-i.updated<this._maxLifetime)return i.style;const c=getComputedStyle(t);return this._computedStyleCache.set(t,{style:c,updated:n}),this._cacheCleanInterval||(this._cacheCleanInterval=setInterval(()=>this._cleanUpCache,Math.max(this._maxLifetime*1e3,5e3))),c}_cleanUpCache(){const t=Date.now();for(const[i,{updated:n}]of this._computedStyleCache.entries())t-n>=this._maxLifetime&&this._computedStyleCache.delete(i);this._computedStyleCache.size===0&&this._cacheCleanInterval&&(clearInterval(this._cacheCleanInterval),this._cacheCleanInterval=null)}}const a=e=>window.TouchEvent&&e instanceof window.TouchEvent;let r;const _=e=>(r||(r=new S),r.get(e)),d=(e,t,i)=>{const n=parseFloat(e),c=window.devicePixelRatio||1;if(t==="px")return n;if(t==="%"){const s=i===document.documentElement?window.innerWidth:i.offsetWidth;return n/100*s}if(t==="rem"){const s=parseFloat(_(document.documentElement).fontSize);return n*s}if(t==="em"){const s=parseFloat(_(i).fontSize);return n*s}if(t==="vh"||t==="vw"||t==="vmin"||t==="vmax"){const s={vh:window.innerHeight,vw:window.innerWidth,vmin:Math.min(window.innerWidth,window.innerHeight),vmax:Math.max(window.innerWidth,window.innerHeight)};return n/100*s[t]}const h={cm:37.7952755906,mm:3.77952755906,in:96};return t in h?n*h[t]*c:(console.warn("Unable to determine coordinates for drag-in. Therefore drag-in is not possible. Check the CSS that positions the iframe of Roomle"),0)},Y=(e,t,i={x:0,y:0})=>{const n=e.getBoundingClientRect(),c=_(e).transform;let h=0,s=0;if(c!=="none"){const v=/translate\(\s*([-+]?\d*\.?\d+|\d+)(px|%)?,?\s*([-+]?\d*\.?\d+|\d+)?(px|%)?\s*\)/,l=c.match(v);l&&(h=d(l[1],l[2],e),s=d(l[3],l[4],e))}const{clientX:T,clientY:w}=X(t,i),g=T-n.left-h+e.scrollLeft,y=w-n.top-s+e.scrollTop;return{x:g,y}},X=(e,t=null)=>{const{clientX:i,clientY:n}=a(e)?D(e):e,c=i>0?i:t?t.x:i,h=n>0?n:t?t.y:n;return{clientX:c,clientY:h}},D=e=>{if(e.touches.length){let{clientX:i,clientY:n}=e.touches[0];if(e.touches.length>1){const c=e.touches[1],h=c.clientX,s=c.clientY;i=(i+h)/2,n=(n+s)/2}return{clientX:i,clientY:n}}const t=e.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}},m=500,f=10,b=100,I=15,u=(e,t=0)=>a(e)?{clientX:e.touches[t].clientX,clientY:e.touches[t].clientY}:{clientX:e.clientX,clientY:e.clientY},p=e=>e&&a(e)?e.touches.length>0:!0;class L{constructor(t,{onTouchDragStart:i},n={}){o(this,"_touchDragTimeOut"),o(this,"_onTouchDragStart"),o(this,"_payload",null),o(this,"_delay",m),o(this,"_firstTouch",null),o(this,"_lastTouch",null),o(this,"_epsilon",f),this._payload=t,this._onTouchDragStart=i,this._delay=typeof n.delay=="number"?n.delay:m,this._epsilon=typeof n.epsilon=="number"?n.epsilon:f}onStart(t){p(t)&&(this._touchDragTimeOut||(this._firstTouch=u(t,a(t)?t.touches.length-1:0),this._touchDragTimeOut=setTimeout(()=>{this._clearTimeout(),this._lastTouch||(this._lastTouch=u(t)),this._checkXDistance(t)()},this._delay)))}onEnd(){this._resetTouches()}onMove(t){p(t)&&(this._lastTouch=u(t))}_clearTimeout(){this._touchDragTimeOut&&(clearTimeout(this._touchDragTimeOut),this._touchDragTimeOut=null)}_resetTouches(){this._clearTimeout(),this._lastTouch=null,this._firstTouch=null,this._payload=null}_checkXDistance(t){return()=>{if(!this._firstTouch||!this._lastTouch)return;let i=!1;i=Math.abs(this._firstTouch.clientX-this._lastTouch.clientX)<this._epsilon,i&&(this._onTouchDragStart(this._payload,t),this._resetTouches())}}}export{Y as D,I,L,f as _,b,m as d,a as l,X as p,_ as r};
