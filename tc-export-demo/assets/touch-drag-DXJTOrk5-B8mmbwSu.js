var C=Object.defineProperty;var x=(e,t,n)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var s=(e,t,n)=>x(e,typeof t!="symbol"?t+"":t,n);class S{constructor(t=16){s(this,"_computedStyleCache",new Map);s(this,"_maxLifetime",16);s(this,"_cacheCleanInterval",null);this._maxLifetime=t}get(t){const n=this._computedStyleCache.get(t),i=Date.now();if(n&&i-n.updated<this._maxLifetime)return n.style;const c=getComputedStyle(t);return this._computedStyleCache.set(t,{style:c,updated:i}),this._cacheCleanInterval||(this._cacheCleanInterval=setInterval(()=>this._cleanUpCache,Math.max(this._maxLifetime*1e3,5e3))),c}_cleanUpCache(){const t=Date.now();for(const[n,{updated:i}]of this._computedStyleCache.entries())t-i>=this._maxLifetime&&this._computedStyleCache.delete(n);this._computedStyleCache.size===0&&this._cacheCleanInterval&&(clearInterval(this._cacheCleanInterval),this._cacheCleanInterval=null)}}const a=e=>window.TouchEvent&&e instanceof window.TouchEvent;let r;const _=e=>(r||(r=new S),r.get(e)),d=(e,t,n)=>{const i=parseFloat(e),c=window.devicePixelRatio||1;if(t==="px")return i;if(t==="%"){const o=n===document.documentElement?window.innerWidth:n.offsetWidth;return i/100*o}if(t==="rem"){const o=parseFloat(_(document.documentElement).fontSize);return i*o}if(t==="em"){const o=parseFloat(_(n).fontSize);return i*o}if(t==="vh"||t==="vw"||t==="vmin"||t==="vmax"){const o={vh:window.innerHeight,vw:window.innerWidth,vmin:Math.min(window.innerWidth,window.innerHeight),vmax:Math.max(window.innerWidth,window.innerHeight)};return i/100*o[t]}const l={cm:37.7952755906,mm:3.77952755906,in:96};return t in l?i*l[t]*c:(console.warn("Unable to determine coordinates for drag-in. Therefore drag-in is not possible. Check the CSS that positions the iframe of Roomle"),0)},I=(e,t,n={x:0,y:0})=>{const i=e.getBoundingClientRect(),c=_(e).transform;let l=0,o=0;if(c!=="none"){const v=/translate\(\s*([-+]?\d*\.?\d+|\d+)(px|%)?,?\s*([-+]?\d*\.?\d+|\d+)?(px|%)?\s*\)/,h=c.match(v);h&&(l=d(h[1],h[2],e),o=d(h[3],h[4],e))}const{clientX:T,clientY:w}=X(t,n),g=T-i.left-l+e.scrollLeft,y=w-i.top-o+e.scrollTop;return{x:g,y}},X=(e,t=null)=>{const{clientX:n,clientY:i}=a(e)?D(e):e,c=n>0?n:t?t.x:n,l=i>0?i:t?t.y:i;return{clientX:c,clientY:l}},D=e=>{if(e.touches.length){let{clientX:n,clientY:i}=e.touches[0];if(e.touches.length>1){const c=e.touches[1],l=c.clientX,o=c.clientY;n=(n+l)/2,i=(i+o)/2}return{clientX:n,clientY:i}}const t=e.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}},m=500,f=10,O=100,E=15,u=(e,t=0)=>a(e)?{clientX:e.touches[t].clientX,clientY:e.touches[t].clientY}:{clientX:e.clientX,clientY:e.clientY},p=e=>e&&a(e)?e.touches.length>0:!0;class L{constructor(t,{onTouchDragStart:n},i={}){s(this,"_touchDragTimeOut");s(this,"_onTouchDragStart");s(this,"_payload",null);s(this,"_delay",m);s(this,"_firstTouch",null);s(this,"_lastTouch",null);s(this,"_epsilon",f);this._payload=t,this._onTouchDragStart=n,this._delay=typeof i.delay=="number"?i.delay:m,this._epsilon=typeof i.epsilon=="number"?i.epsilon:f}onStart(t){p(t)&&(this._touchDragTimeOut||(this._firstTouch=u(t,a(t)?t.touches.length-1:0),this._touchDragTimeOut=setTimeout(()=>{this._clearTimeout(),this._lastTouch||(this._lastTouch=u(t)),this._checkXDistance(t)()},this._delay)))}onEnd(){this._resetTouches()}onMove(t){p(t)&&(this._lastTouch=u(t))}_clearTimeout(){this._touchDragTimeOut&&(clearTimeout(this._touchDragTimeOut),this._touchDragTimeOut=null)}_resetTouches(){this._clearTimeout(),this._lastTouch=null,this._firstTouch=null,this._payload=null}_checkXDistance(t){return()=>{if(!this._firstTouch||!this._lastTouch)return;let n=!1;n=Math.abs(this._firstTouch.clientX-this._lastTouch.clientX)<this._epsilon,n&&(this._onTouchDragStart(this._payload,t),this._resetTouches())}}}export{I as D,E,L as O,X,O as Y,f,m,a as r,_ as u};
