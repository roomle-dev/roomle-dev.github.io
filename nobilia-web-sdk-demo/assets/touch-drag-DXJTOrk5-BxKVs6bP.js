class v{_computedStyleCache=new Map;_maxLifetime=16;_cacheCleanInterval=null;constructor(t=16){this._maxLifetime=t}get(t){const i=this._computedStyleCache.get(t),n=Date.now();if(i&&n-i.updated<this._maxLifetime)return i.style;const c=getComputedStyle(t);return this._computedStyleCache.set(t,{style:c,updated:n}),this._cacheCleanInterval||(this._cacheCleanInterval=setInterval(()=>this._cleanUpCache,Math.max(this._maxLifetime*1e3,5e3))),c}_cleanUpCache(){const t=Date.now();for(const[i,{updated:n}]of this._computedStyleCache.entries())t-n>=this._maxLifetime&&this._computedStyleCache.delete(i);this._computedStyleCache.size===0&&this._cacheCleanInterval&&(clearInterval(this._cacheCleanInterval),this._cacheCleanInterval=null)}}const h=e=>window.TouchEvent&&e instanceof window.TouchEvent;let a;const u=e=>(a||(a=new v),a.get(e)),_=(e,t,i)=>{const n=parseFloat(e),c=window.devicePixelRatio||1;if(t==="px")return n;if(t==="%"){const o=i===document.documentElement?window.innerWidth:i.offsetWidth;return n/100*o}if(t==="rem"){const o=parseFloat(u(document.documentElement).fontSize);return n*o}if(t==="em"){const o=parseFloat(u(i).fontSize);return n*o}if(t==="vh"||t==="vw"||t==="vmin"||t==="vmax"){const o={vh:window.innerHeight,vw:window.innerWidth,vmin:Math.min(window.innerWidth,window.innerHeight),vmax:Math.max(window.innerWidth,window.innerHeight)};return n/100*o[t]}const s={cm:37.7952755906,mm:3.77952755906,in:96};return t in s?n*s[t]*c:(console.warn("Unable to determine coordinates for drag-in. Therefore drag-in is not possible. Check the CSS that positions the iframe of Roomle"),0)},S=(e,t,i={x:0,y:0})=>{const n=e.getBoundingClientRect(),c=u(e).transform;let s=0,o=0;if(c!=="none"){const y=/translate\(\s*([-+]?\d*\.?\d+|\d+)(px|%)?,?\s*([-+]?\d*\.?\d+|\d+)?(px|%)?\s*\)/,l=c.match(y);l&&(s=_(l[1],l[2],e),o=_(l[3],l[4],e))}const{clientX:p,clientY:T}=C(t,i),w=p-n.left-s+e.scrollLeft,g=T-n.top-o+e.scrollTop;return{x:w,y:g}},C=(e,t=null)=>{const{clientX:i,clientY:n}=h(e)?x(e):e,c=i>0?i:t?t.x:i,s=n>0?n:t?t.y:n;return{clientX:c,clientY:s}},x=e=>{if(e.touches.length){let{clientX:i,clientY:n}=e.touches[0];if(e.touches.length>1){const c=e.touches[1],s=c.clientX,o=c.clientY;i=(i+s)/2,n=(n+o)/2}return{clientX:i,clientY:n}}const t=e.changedTouches[0];return{clientX:t.clientX,clientY:t.clientY}},d=500,m=10,X=100,D=15,r=(e,t=0)=>h(e)?{clientX:e.touches[t].clientX,clientY:e.touches[t].clientY}:{clientX:e.clientX,clientY:e.clientY},f=e=>e&&h(e)?e.touches.length>0:!0;class Y{_touchDragTimeOut;_onTouchDragStart;_payload=null;_delay=d;_firstTouch=null;_lastTouch=null;_epsilon=m;constructor(t,{onTouchDragStart:i},n={}){this._payload=t,this._onTouchDragStart=i,this._delay=typeof n.delay=="number"?n.delay:d,this._epsilon=typeof n.epsilon=="number"?n.epsilon:m}onStart(t){f(t)&&(this._touchDragTimeOut||(this._firstTouch=r(t,h(t)?t.touches.length-1:0),this._touchDragTimeOut=setTimeout(()=>{this._clearTimeout(),this._lastTouch||(this._lastTouch=r(t)),this._checkXDistance(t)()},this._delay)))}onEnd(){this._resetTouches()}onMove(t){f(t)&&(this._lastTouch=r(t))}_clearTimeout(){this._touchDragTimeOut&&(clearTimeout(this._touchDragTimeOut),this._touchDragTimeOut=null)}_resetTouches(){this._clearTimeout(),this._lastTouch=null,this._firstTouch=null,this._payload=null}_checkXDistance(t){return()=>{if(!this._firstTouch||!this._lastTouch)return;let i=!1;i=Math.abs(this._firstTouch.clientX-this._lastTouch.clientX)<this._epsilon,i&&(this._onTouchDragStart(this._payload,t),this._resetTouches())}}}export{S as D,D as E,Y as O,C as X,X as Y,m as f,d as m,h as r,u};
